<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Gothic AI Grimoire</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Crimson+Text:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
    <style>
      :root {
        --color-gothic-black: #0a0a0a;
        --color-gothic-dark: #1a1a1a;
        --color-gothic-red: #7f1d1d;
        --color-gothic-gold: #c5a059;
        --color-gothic-text: #d4d4d4;
      }
      body {
        background-color: #050505;
        color: var(--color-gothic-text);
        font-family: 'Crimson Text', serif;
      }
      .font-header {
        font-family: 'Cinzel', serif;
      }
      .font-display {
        font-family: 'Playfair Display', serif;
      }
      /* Custom Scrollbar */
      ::-webkit-scrollbar {
        width: 6px;
      }
      ::-webkit-scrollbar-track {
        background: #1a1a1a; 
      }
      ::-webkit-scrollbar-thumb {
        background: #444; 
        border-radius: 3px;
      }
      ::-webkit-scrollbar-thumb:hover {
        background: #7f1d1d; 
      }
      .error-message {
        color: var(--color-gothic-red);
        text-align: center;
        margin-top: 1rem;
        font-family: 'Cinzel', serif;
      }
    </style>

    <script type="importmap">
{
  "imports": {
    "react/": "https://esm.sh/react@^19.2.3/",
    "react": "https://esm.sh/react@^19.2.3",
    "react-dom/": "https://esm.sh/react-dom@^19.2.3/",
    "@google/genai": "https://esm.sh/@google/genai@^1.37.0"
  }
}
    </script>
    <!-- ä¿®å¤ï¼šç»å¯¹è·¯å¾„æ”¹ä¸ºç›¸å¯¹è·¯å¾„ï¼Œé€‚é…gothicoså­ç›®å½• -->
    <script type="module" crossorigin src="./assets/index-09S6psD3.js"></script>
  </head>
  <body>
    <div id="root">
      <div style="color: #c5a059; text-align: center; margin-top: 20vh; font-family: 'Cinzel', serif;">
        <h1 class="animate-pulse">Loading Grimoire...</h1>
        <!-- åŠ è½½å¤±è´¥æç¤ºï¼ˆé»˜è®¤éšè—ï¼‰ -->
        <div id="load-error" class="error-message hidden">åŠ è½½å¤±è´¥ï¼Œè¯·åˆ·æ–°æˆ–æ£€æŸ¥ç½‘ç»œ</div>
      </div>
    </div>

    <!-- å®¹é”™å¤„ç†ï¼š5ç§’æœªåŠ è½½æˆåŠŸæ˜¾ç¤ºé”™è¯¯ -->
    <script>
      window.reactLoaded = false;
      setTimeout(() => {
        if (!window.reactLoaded) {
          document.getElementById('load-error').classList.remove('hidden');
          document.querySelector('.animate-pulse').classList.remove('animate-pulse');
          console.error('Reactåº”ç”¨åŠ è½½è¶…æ—¶ï¼ˆgothicoséƒ¨ç½²ï¼‰');
        }
      }, 5000);
    </script>

    <!-- å…¼å®¹Reactæ¸²æŸ“å®Œæˆæ ‡è®° -->
    <script type="module">
      // ç›‘å¬ReactåŠ è½½çŠ¶æ€ï¼Œé¿å…è¯¯åˆ¤
      import React from 'react';
      import ReactDOM from 'react-dom/client';
      console.log('=== gothicoséƒ¨ç½² - åˆå§‹åŒ–æ—¥å¿— ===');
      console.log('1. ä¾èµ–åŒ…å¼€å§‹åŠ è½½');
      
      // æ ‡è®°Reactå·²åŠ è½½
      window.reactLoaded = true;
      console.log('2. Reactæ ¸å¿ƒåŒ…åŠ è½½å®Œæˆ');

      // å®‰å…¨åˆå§‹åŒ–Google GenAI
      let genAI = null;
      try {
        const { GoogleGenerativeAI } = await import('@google/genai');
        console.log('3. @google/genaiåŠ è½½å®Œæˆ');
        
        // æ›¿æ¢ä¸ºä½ çš„API Keyï¼ˆå»ºè®®é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼Œæ­¤å¤„ä»…æ¼”ç¤ºï¼‰
        const apiKey = window.GOOGLE_API_KEY || "";
        if (apiKey) {
          genAI = new GoogleGenerativeAI(apiKey);
          console.log('4. Google GenAIåˆå§‹åŒ–æˆåŠŸ');
        } else {
          console.warn('4. æœªé…ç½®Google API Keyï¼ŒAIåŠŸèƒ½ä¸å¯ç”¨');
        }
      } catch (e) {
        console.error('4. Google GenAIåˆå§‹åŒ–å¤±è´¥:', e.message);
        // ä¸é˜»æ–­åº”ç”¨æ¸²æŸ“
      }

      // æ¸²æŸ“åº”ç”¨
      try {
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(
          <React.StrictMode>
            <div style={{ 
              minHeight: '100vh', 
              backgroundColor: '#050505',
              color: '#d4d4d4',
              padding: '2rem'
            }}>
              <h1 className="font-header text-[#c5a059] text-center mb-6">Gothic AI Grimoire</h1>
              <div className="font-display max-w-3xl mx-auto text-center">
                {genAI ? (
                  <p>ğŸ”® AI é­”æ³•ä¹¦å·²å°±ç»ªï¼ˆgothicoséƒ¨ç½²ï¼‰</p>
                ) : (
                  <p className="text-[#7f1d1d]"âš ï¸ AI åˆå§‹åŒ–å¤±è´¥ï¼Œè¯·æ£€æŸ¥API Key</p>
                )}
              </div>
            </div>
          </React.StrictMode>
        );
        console.log('5. Reactåº”ç”¨æ¸²æŸ“æˆåŠŸ');
      } catch (e) {
        console.error('5. Reactåº”ç”¨æ¸²æŸ“å¤±è´¥:', e);
        // æ˜¾ç¤ºé”™è¯¯æç¤º
        document.getElementById('load-error').classList.remove('hidden');
      }
    </script>
  </body>
</html>
